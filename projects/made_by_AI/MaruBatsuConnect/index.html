<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marubatsu Connect</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <div class="player-info player-one">
            <div class="turn-indicator p1-turn">YOUR TURN</div>
            <div class="player-symbol-large p1-symbol">O</div>
            <div class="player-id">P1</div>
            <div class="player-score" id="p1-score">0000</div>
        </div>

        <div class="main-game-area">
            <div class="round-info">ROUND <span id="round-number">1</span></div>
            <div class="game-board" id="game-board">
                <!-- Grid cells will be generated by JavaScript -->
            </div>
            <div class="connection-info" id="connection-info" style="visibility: hidden;">
                <div class="connected-text">CONNECTED</div>
                <div class="chain-text">CHAIN <span id="chain-length">1</span></div>
                <div class="chain-score" id="chain-score">100</div>
            </div>
        </div>

        <div class="player-info player-two">
             <div class="turn-indicator p2-turn" style="visibility: hidden;">YOUR TURN</div>
            <div class="player-symbol-large p2-symbol">X</div>
            <div class="player-id">P2</div>
            <div class="player-score" id="p2-score">0000</div>
        </div>

        <div class="next-pieces-area">
            <div class="next-label">NEXT</div>
            <div id="current-next-piece-container" class="next-item current-next"> 
                <div class="piece" id="next-piece-1-top">X</div>
                <div class="piece" id="next-piece-1-bottom">O</div>
            </div>
            <div class="next-item upcoming-next"> 
                <div>2 ►</div>
                <div class="piece-stack" id="upcoming-piece-2-container">
                    <div class="piece small-piece" id="next-piece-2-top">X</div>
                    <div class="piece small-piece" id="next-piece-2-bottom">X</div>
                </div>
            </div>
            <div class="next-item upcoming-next">
                <div>3 ►</div>
                <div class="piece-stack" id="upcoming-piece-3-container">
                    <div class="piece small-piece" id="next-piece-3-top">O</div>
                    <div class="piece small-piece" id="next-piece-3-bottom">O</div>
                </div>
            </div>
            <div class="game-logo">
                <span class="logo-o">O</span><span class="logo-x">X</span>
                <div class="logo-subtitle">-MARUBATSU-</div>
            </div>
        </div>
    </div>

    <div id="game-over-message" class="game-over-message" style="display: none;">
        <h2>Game Over</h2>
        <p id="winner-message"></p>
        <button id="restart-button">Restart Game</button>
    </div>

    <div id="rules-section" class="rules-section">
        <h2>ゲームルール</h2>
        <p><strong>基本:</strong> 交互に「NEXT」に表示されるピース（OまたはXのペア、縦または横）を盤面に配置します。自分の色のピースを縦・横・斜めに3つ以上つなげると得点になります（3つで100点、4つで200点...）。</p>
        <p><strong>ピースの配置:</strong></p>
        <ul>
            <li><strong>縦ペア:</strong> クリックした列に上から2つのピースが配置されます。下のピースから先に接地します。</li>
            <li><strong>横ペア:</strong> クリックした列を左側として、2つのピースが水平に配置されます。右隣の列にもスペースが必要です。</li>
        </ul>
        <p><strong>ゲームオーバー:</strong></p>
        <ul>
            <li>現在のプレイヤーが「NEXT」のピースを盤面のどこにも合法的に配置できなくなった場合、ゲームオーバーとなります。</li>
            <li>ゲームオーバー時、スコアが高い方のプレイヤーが勝者となります。</li>
        </ul>
        <p><strong>サンダーチェンジャーイベント:</strong></p>
        <ul>
            <li>手番が変わった後、低い確率で発生します。</li>
            <li>盤上にあるいくつかのピースのマーク（OとX）がランダムに変化します！</li>
            <li>この変化によって新たにピースがつながった場合、対応するプレイヤーに得点が入ります。</li>
        </ul>
    </div>

    <script src="script.js"></script>
</body>
</html>